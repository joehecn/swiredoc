<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1342px" preserveAspectRatio="none" style="width:786px;height:1342px;" version="1.1" viewBox="0 0 786 1342" width="786px" zoomAndPan="magnify"><defs><filter height="300%" id="frnep1pnd2fip" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b3c28d35935f3876a80fe695c843767a]
cluster windows--><polygon fill="#FFFFFF" filter="url(#frnep1pnd2fip)" points="16,16,26,6,475,6,475,925.5,465,935.5,16,935.5,16,16" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="465" x2="475" y1="16" y2="6"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="465" y1="16" y2="16"/><line style="stroke:#000000;stroke-width:1.5;" x1="465" x2="465" y1="16" y2="935.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="165.5" y="31.9951">本地 Windows 服务器</text><!--MD5=[2644e6386f494d2055ebee00e5be7925]
cluster excel--><polygon fill="#FFFFFF" filter="url(#frnep1pnd2fip)" points="276,38,375,38,382,60.2969,385,60.2969,385,109,276,109,276,38" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="276" x2="382" y1="60.2969" y2="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="280" y="52.9951">Excel folder</text><!--MD5=[b1998054c1ba7999bb471b34eb291026]
cluster txt--><polygon fill="#FFFFFF" filter="url(#frnep1pnd2fip)" points="165,38,248,38,255,60.2969,258,60.2969,258,109,165,109,165,38" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="165" x2="255" y1="60.2969" y2="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="169" y="52.9951">Txt folder</text><!--MD5=[dfd23b90799ff6bf30fa3aabce10361c]
cluster localdb--><path d="M24,410.5 C24,400.5 137.5,400.5 137.5,400.5 C137.5,400.5 251,400.5 251,410.5 L251,917.5 C251,927.5 137.5,927.5 137.5,927.5 C137.5,927.5 24,927.5 24,917.5 L24,410.5 " fill="#FFFFFF" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M24,410.5 C24,420.5 137.5,420.5 137.5,420.5 C137.5,420.5 251,420.5 251,410.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="32" y="435.4951">Local Mongodb Replica Set</text><!--MD5=[976610ca9a5eadefdf5ca97519844eee]
cluster linux--><polygon fill="#FFFFFF" filter="url(#frnep1pnd2fip)" points="483,746.5,493,736.5,769,736.5,769,1193.5,759,1203.5,483,1203.5,483,746.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="769" y1="746.5" y2="736.5"/><line style="stroke:#000000;stroke-width:1.5;" x1="483" x2="759" y1="746.5" y2="746.5"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="759" y1="746.5" y2="1203.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="517" y="762.4951">日本服务器 172.105.202.170</text><!--MD5=[670a7a1f521ac73274266eeead13f881]
entity mssql--><path d="M24,70.5 C24,60.5 81,60.5 81,60.5 C81,60.5 138,60.5 138,70.5 L138,95.7969 C138,105.7969 81,105.7969 81,105.7969 C81,105.7969 24,105.7969 24,95.7969 L24,70.5 " fill="#FEFECE" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M24,70.5 C24,80.5 81,80.5 81,80.5 C81,80.5 138,80.5 138,70.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="34" y="97.4951">Microsoft SQL</text><!--MD5=[73ca96ba5138b7bb33dba1da3d0e470d]
entity schedule--><rect fill="#FEFECE" filter="url(#frnep1pnd2fip)" height="70.5938" style="stroke:#A80036;stroke-width:1.5;" width="194" x="116" y="228.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="290" y="233.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="288" y="235.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="288" y="239.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="131" y="261.4951">schedule</text><line style="stroke:#A80036;stroke-width:1.0;" x1="117" x2="309" y1="264.7969" y2="264.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="131" y="281.792">定时抓取并处理本地数据</text><!--MD5=[294dd4295b3538d2597418482775d5c9]
entity shake--><rect fill="#FEFECE" filter="url(#frnep1pnd2fip)" height="70.5938" style="stroke:#A80036;stroke-width:1.5;" width="208" x="259" y="610.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="447" y="615.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="617.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="621.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="274" y="643.4951">Mongo Shake</text><line style="stroke:#A80036;stroke-width:1.0;" x1="260" x2="466" y1="646.7969" y2="646.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="274" y="663.792">单向同步数据到线上数据库</text><!--MD5=[5e28904cfe1c649a71fa9ba5e99b96e2]
entity Excel--><polygon fill="#FEFECE" filter="url(#frnep1pnd2fip)" points="285,65,285,101.2969,341,101.2969,341,75,331,65,285,65" style="stroke:#000000;stroke-width:1.5;"/><path d="M331,65 L331,75 L341,75 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="295" y="87.9951">Excel</text><!--MD5=[8b5e1a0da03b0da7632d9e511fe0fc43]
entity Txt--><polygon fill="#FEFECE" filter="url(#frnep1pnd2fip)" points="173.5,65,173.5,101.2969,214.5,101.2969,214.5,75,204.5,65,173.5,65" style="stroke:#000000;stroke-width:1.5;"/><path d="M204.5,65 L204.5,75 L214.5,75 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="183.5" y="87.9951">Txt</text><!--MD5=[8e613d614b23a976aeefc2e13d7e1e88]
entity arbiter--><path d="M39,452.5 C39,442.5 71,442.5 71,442.5 C71,442.5 103,442.5 103,452.5 L103,477.7969 C103,487.7969 71,487.7969 71,487.7969 C71,487.7969 39,487.7969 39,477.7969 L39,452.5 " fill="#FEFECE" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M39,452.5 C39,462.5 71,462.5 71,462.5 C71,462.5 103,462.5 103,452.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="49" y="479.4951">arbiter</text><!--MD5=[bd39a4c76d4729f7d3a505ada56cb8c7]
entity primary--><path d="M173,452.5 C173,442.5 208,442.5 208,442.5 C208,442.5 243,442.5 243,452.5 L243,477.7969 C243,487.7969 208,487.7969 208,487.7969 C208,487.7969 173,487.7969 173,477.7969 L173,452.5 " fill="#FEFECE" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M173,452.5 C173,462.5 208,462.5 208,462.5 C208,462.5 243,462.5 243,452.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="183" y="479.4951">primary</text><!--MD5=[ca68d2e3dfee2ff470ce8e9333c0d544]
entity secondary--><path d="M32,884.5 C32,874.5 78,874.5 78,874.5 C78,874.5 124,874.5 124,884.5 L124,909.7969 C124,919.7969 78,919.7969 78,919.7969 C78,919.7969 32,919.7969 32,909.7969 L32,884.5 " fill="#FEFECE" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M32,884.5 C32,894.5 78,894.5 78,894.5 C78,894.5 124,894.5 124,884.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="42" y="911.4951">secondary</text><!--MD5=[08af8945a84acfe1eabc0963aa87c412]
entity web--><rect fill="#FEFECE" filter="url(#frnep1pnd2fip)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="217" x="491.5" y="1149.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="688.5" y="1154.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="686.5" y="1156.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="686.5" y="1160.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="506.5" y="1182.4951">前台 swire.enermon.cloud</text><!--MD5=[8c5a6473d0402e601d65832b879e3c77]
entity energy--><rect fill="#FEFECE" filter="url(#frnep1pnd2fip)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="120" x="515" y="980.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="615" y="985.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="613" y="987.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="613" y="991.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="530" y="1013.4951">后台 energy</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M499,778.5 C499,768.5 542,768.5 542,768.5 C542,768.5 585,768.5 585,778.5 L585,803.7969 C585,813.7969 542,813.7969 542,813.7969 C542,813.7969 499,813.7969 499,803.7969 L499,778.5 " fill="#FEFECE" filter="url(#frnep1pnd2fip)" style="stroke:#000000;stroke-width:1.5;"/><path d="M499,778.5 C499,788.5 542,788.5 542,788.5 C542,788.5 585,788.5 585,778.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="509" y="805.4951">Mongodb</text><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><ellipse cx="600" cy="1266" fill="#FEFECE" filter="url(#frnep1pnd2fip)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M600,1274 L600,1301 M587,1282 L613,1282 M600,1301 L587,1316 M600,1301 L613,1316 " fill="none" filter="url(#frnep1pnd2fip)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="584.5" y="1334.4951">user</text><!--MD5=[ae93cba451dc69f119472b40e0674480]
link mssql to schedule--><path d="M97.451,105.5578 C119.0347,135.1537 157.2792,187.5949 183.8287,224 " fill="none" id="mssql-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="187.0066,228.3575,184.9351,218.729,184.0603,224.3178,178.4715,223.443,187.0066,228.3575" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0dbc8509c2bfa1eed15664e3accf0e4e]
link excel to schedule--><path d="M358,109 C324.6512,150.3399 282.8879,194.2658 252.758,224.7598 " fill="none" id="excel-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="249.1427,228.411,258.3176,224.8304,252.6608,224.8582,252.6331,219.2014,249.1427,228.411" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[9b55868552ef094c06c8bdf4d7495233]
link txt to schedule--><path d="M244.6215,109.3109 C244.5867,109.4813 244.5517,109.6524 244.5167,109.824 C244.4465,110.1674 244.3758,110.5132 244.3046,110.8614 C244.1622,111.5579 244.0179,112.2641 243.8716,112.9796 C243.5791,114.4106 243.2789,115.8788 242.9718,117.3812 C241.7434,123.3906 240.4034,129.9455 238.9936,136.8421 C233.3544,164.4286 226.5973,197.4838 221.386,222.9767 " fill="none" id="txt-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="220.3349,228.1186,226.0566,220.1023,221.3365,223.2199,218.2188,218.4998,220.3349,228.1186" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[481893dbcb530bd42beba0e73803945a]
link schedule to localdb--><path d="M196.1734,299.6602 C189.9567,313.2725 182.6544,329.7429 175.4108,347.1799 C171.7889,355.8985 168.1818,364.8587 164.7323,373.8242 C163.0076,378.3069 161.3223,382.791 159.6943,387.2468 C158.8803,389.4747 158.0806,391.6956 157.2975,393.9057 C156.9059,395.0107 156.5185,396.1131 156.1355,397.2123 C155.944,397.7619 155.7536,398.3107 155.5643,398.8587 C155.4697,399.1327 155.3753,399.4064 155.2813,399.68 C155.2343,399.8168 155.1873,399.9535 155.1404,400.0902 " fill="none" id="schedule-to-localdb" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="155.1404,400.0902,161.8443,392.875,156.7628,395.3607,154.2771,390.2792,155.1404,400.0902" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[93b5e1091a069314c0b8172f4575c299]
link localdb to shake--><path d="M251.4752,569.8122 C251.6754,569.9628 251.8755,570.1134 252.0755,570.2638 C252.8755,570.8653 253.6742,571.4644 254.4716,572.0612 C256.0662,573.2547 257.6554,574.4384 259.238,575.6122 C262.4033,577.9596 265.5427,580.2669 268.6491,582.531 C281.0746,591.5873 292.9708,599.9526 303.8761,607.4369 " fill="none" id="localdb-to-shake" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308.047,610.2896,302.8766,601.9071,303.92,607.4669,298.3602,608.5103,308.047,610.2896" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ca741fa07186bdcb14dc9e1f4074e4eb]
link shake to db--><path d="M407.2472,681.8427 C439.1197,707.6612 481.3826,741.8965 510.0172,765.0922 " fill="none" id="shake-to-db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="514.1403,768.432,509.6647,759.6588,510.2551,765.2848,504.6291,765.8752,514.1403,768.432" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="465" y="724.5669">端口 27017</text><!--MD5=[678ab4e4a9def5d5f86c03b141b961f1]
link db to energy--><path d="M545.5316,813.7412 C551.6031,852.838 564.0033,932.688 570.6168,975.2746 " fill="none" id="db-to-energy" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="571.3938,980.2781,573.9651,970.7708,570.6264,975.3373,566.0599,971.9987,571.3938,980.2781" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[20722876e6dadf27d121116923e044b0]
link energy to web--><path d="M578.4237,1026.6444 C582.9554,1057.2784 590.94,1111.2545 595.8218,1144.2551 " fill="none" id="energy-to-web" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="596.5776,1149.3646,599.2174,1139.8761,595.8459,1144.4184,591.3036,1141.0469,596.5776,1149.3646" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[b8bb4ea9537ae551ae4db45a3eff5dc2]
link web to user--><path d="M600,1195.6257 C600,1211.181 600,1232.2175 600,1251.0955 " fill="none" id="web-to-user" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="600,1256.3565,604,1247.3565,600,1251.3565,596,1247.3565,600,1256.3565" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[c1cc5f351e3b1b530bbea1e94f298d0a]
link arbiter to primary--><!--MD5=[646f079785c1a82ee6f637aa7f2a1e2b]
link arbiter to secondary--><!--MD5=[16bc9292a306b9fbcd3714f6abcca6b6]
@startuml now
  ' 定义变量 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ' 本地 windows 服务器
  node "本地 Windows 服务器" as windows {
    ' MS Sql
    database "Microsoft SQL" as mssql
    ' Excel file
    folder "Excel folder" as excel {
      file "Excel"
    }
    ' Txt file
    folder "Txt folder" as txt {
      file "Txt"
    }

    ' 定时抓取数据
    component schedule [
      <b>schedule
      - - - -
      定时抓取并处理本地数据
    ]

    ' Local Mongodb
    database "Local Mongodb Replica Set" as localdb {
      database arbiter
      database primary
      database secondary
    }
    ' 单项同步
    component shake [
      <b>Mongo Shake
      - - - -
      单向同步数据到线上数据库
    ]
  }

  ' 线上 linux 服务器 http://swire.enermon.cloud/
  node "日本服务器 172.105.202.170" as linux {
    ' web
    component "前台 swire.enermon.cloud" as web
    component "后台 energy" as energy

    database "Mongodb" as db
  }

  actor user

  ' 关系
  mssql - -> schedule
  excel - -> schedule
  txt - -> schedule
  schedule - -> localdb
  localdb - -> shake

  shake - -> db : 端口 27017
  db -[#green]-> energy
  energy -[#green]-> web
  web -[#green]-> user
  
@enduml

@startuml now
  node "本地 Windows 服务器" as windows {
    database "Microsoft SQL" as mssql
    folder "Excel folder" as excel {
      file "Excel"
    }
    folder "Txt folder" as txt {
      file "Txt"
    }

    component schedule [
      <b>schedule
      - - - -
      定时抓取并处理本地数据
    ]

    database "Local Mongodb Replica Set" as localdb {
      database arbiter
      database primary
      database secondary
    }
    component shake [
      <b>Mongo Shake
      - - - -
      单向同步数据到线上数据库
    ]
  }

  node "日本服务器 172.105.202.170" as linux {
    component "前台 swire.enermon.cloud" as web
    component "后台 energy" as energy

    database "Mongodb" as db
  }

  actor user

  mssql - -> schedule
  excel - -> schedule
  txt - -> schedule
  schedule - -> localdb
  localdb - -> shake

  shake - -> db : 端口 27017
  db -[#green]-> energy
  energy -[#green]-> web
  web -[#green]-> user
  
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>