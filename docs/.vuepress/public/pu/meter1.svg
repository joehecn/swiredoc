<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="700px" preserveAspectRatio="none" style="width:532px;height:700px;" version="1.1" viewBox="0 0 532 700" width="532px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ohletlo3q0vc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="61.9063" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="124" x="36.5" y="38.6982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="46.5" y="59.8369">用户修改电表</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="104" x="46.5" y="73.8057">- 添加、替换、停用</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="46.5" y="87.7744">- 改变类别</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="64.5" y="595.3604"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="74.5" y="616.499">监听消息</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="128" x="34.5" y="649.3291"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="44.5" y="670.4678">把反馈结果通知用户</text><line style="stroke:#000000;stroke-width:2.0;" x1="15" x2="15" y1="12.7451" y2="683.2979"/><rect fill="#FAEBD7" height="670.5527" style="stroke:#FAEBD7;stroke-width:1.0;" width="136" x="186" y="12.7451"/><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="119" x="192.5" y="137.8638"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="202.5" y="159.0024">msg - partition1</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="119" x="192.5" y="524.1323"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="202.5" y="545.271">msg - partition2</text><line style="stroke:#000000;stroke-width:2.0;" x1="186" x2="186" y1="12.7451" y2="683.2979"/><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="61.9063" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="381" y="209.0918"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="391" y="230.2305">压入队列</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="391" y="244.1992">先进先出</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="391" y="258.168">顺序执行</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="135" x="347.5" y="290.998"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="357.5" y="312.1367">UpdateDashboard</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="119" x="355.5" y="344.9668"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="365.5" y="366.1055">UpdateKwhhour</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="112" x="359" y="398.9355"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="369" y="420.0742">UpdateKwhday</text><rect fill="#FEFECE" filter="url(#f1ohletlo3q0vc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="130" x="350" y="452.9043"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="360" y="474.043">UpdateKwhmonth</text><line style="stroke:#000000;stroke-width:2.0;" x1="322" x2="322" y1="12.7451" y2="683.2979"/><line style="stroke:#000000;stroke-width:2.0;" x1="512" x2="512" y1="12.7451" y2="683.2979"/><line style="stroke:#A80036;stroke-width:1.5;" x1="98.5" x2="98.5" y1="629.3291" y2="649.3291"/><polygon fill="#A80036" points="94.5,639.3291,98.5,649.3291,102.5,639.3291,98.5,643.3291" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="415" y1="270.998" y2="290.998"/><polygon fill="#A80036" points="411,280.998,415,290.998,419,280.998,415,284.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="415" y1="324.9668" y2="344.9668"/><polygon fill="#A80036" points="411,334.9668,415,344.9668,419,334.9668,415,338.9668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="415" y1="378.9355" y2="398.9355"/><polygon fill="#A80036" points="411,388.9355,415,398.9355,419,388.9355,415,392.9355" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="415" x2="415" y1="432.9043" y2="452.9043"/><polygon fill="#A80036" points="411,442.9043,415,452.9043,419,442.9043,415,446.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="98.5" x2="98.5" y1="100.6045" y2="122.8638"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="98.5" x2="252" y1="122.8638" y2="122.8638"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="252" y1="122.8638" y2="137.8638"/><polygon fill="#000000" points="248,127.8638,252,137.8638,256,127.8638,252,131.8638" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="102.5" y="116.3638">send msg</text><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="252" y1="171.8325" y2="194.0918"/><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="415" y1="194.0918" y2="194.0918"/><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="415" x2="415" y1="194.0918" y2="209.0918"/><polygon fill="#008000" points="411,199.0918,415,209.0918,419,199.0918,415,203.0918" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="256" y="187.5918">on msg</text><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="415" x2="415" y1="486.873" y2="509.1323"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="415" x2="252" y1="509.1323" y2="509.1323"/><line style="stroke:#000000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="252" y1="509.1323" y2="524.1323"/><polygon fill="#000000" points="248,514.1323,252,524.1323,256,514.1323,252,518.1323" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="419" y="502.6323">send msg</text><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="252" y1="558.1011" y2="580.3604"/><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="252" x2="98.5" y1="580.3604" y2="580.3604"/><line style="stroke:#008000;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="98.5" x2="98.5" y1="580.3604" y2="595.3604"/><polygon fill="#008000" points="94.5,585.3604,98.5,595.3604,102.5,585.3604,98.5,589.3604" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="256" y="573.8604">on msg</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="161" x="20" y="29.4531">EnerMon - Energy</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="126" x="191" y="29.4531">Kafka 消息队列</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="180" x="327" y="29.4531">Windows - Schedule</text><!--MD5=[7e039e692fbe62aca0d9a2eb9fed7d34]
@startuml meter1
|EnerMon - Energy|
:用户修改电表
- 添加、替换、停用
- 改变类别;
|#AntiqueWhite|Kafka 消息队列|
-[#black,dotted]-> send msg;
:msg - partition1;
-[#green,dotted]-> on msg;
|Windows - Schedule|
:压入队列
先进先出
顺序执行;
:UpdateDashboard;
:UpdateKwhhour;
:UpdateKwhday;
:UpdateKwhmonth;
|#AntiqueWhite|Kafka 消息队列|
-[#black,dotted]-> send msg;
:msg - partition2;
-[#green,dotted]-> on msg;
|EnerMon - Energy|
:监听消息;
:把反馈结果通知用户;
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>